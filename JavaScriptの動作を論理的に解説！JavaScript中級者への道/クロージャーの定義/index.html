<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>クロージャーについて学ぼう</title>
</head>

<body>
    <p>クロージャーについて学ぼう</p>

</body>

<script>
    // 組み合わされた（囲まれた）関数と、
    // その周囲の状態（レキシカル環境）への参照の組み合わせ
    let imcrement = (function () {
        let counter = 0; // Lexical Scope
        // プライベート変数を定義できる

        return function() {
            counter += 1;
            console.log(counter);
        }
    })();
    imcrement();
    imcrement();
    imcrement();

    function addStringFacory(tail){
        // Lexical Scope
        // 内側の関数：concat から 外側の関数: addStringFacory
        // へのLexical Scopeへの変数の参照を持っている（tailを変数）
        function concat(str) {
            return str + tail; // 変数と関数が絡み合っている
        }
        return concat;
    }

    let addAs = addStringFacory('AAAAAA');
    let addBs = addStringFacory('BBBBBB');

    let str = 'Tom';
    str = addAs(str);
    // str = addBs(str);
    console.log(str);
</script>

</html>